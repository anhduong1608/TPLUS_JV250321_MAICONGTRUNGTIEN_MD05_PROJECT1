<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Admin - Course Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .sidebar {
            width: 220px;
            background: #0d6efd;
            color: white;
            padding: 20px;
            position: fixed;   /* ‚úÖ c·ªë ƒë·ªãnh b√™n tr√°i */
            top: 0;
            left: 0;
            height: 100vh;     /* chi·∫øm h·∫øt chi·ªÅu cao m√†n h√¨nh */
            overflow-y: auto;  /* cu·ªôn n·∫øu menu d√†i */
        }

        .sidebar a {
            color: white;
            display: block;
            padding: 10px;
            text-decoration: none;
            border-radius: 6px;
        }

        .sidebar a:hover, .sidebar .active {
            background: #0b5ed7;
        }

        .content {
            margin-left: 220px;  /* ‚úÖ ch·ª´a ch·ªó cho sidebar */
            padding: 30px;
            background: #f8f9fa;
            min-height: 100vh;
        }

    </style>
</head>
<body>


<div class="sidebar">
    <h4 class="mb-4">Admin Panel</h4>
    <a th:href="@{/admin/home}" class="active">üè† Dashboard</a>
    <a th:href="@{/admin/course_management}" >üìö Course Management</a>
    <a th:href="@{/admin/users}">üë®‚Äçüéì Students</a>
    <a th:href="@{/admin/registrations}">üìù Register</a>
    <a class="nav-link text-danger" th:href="@{/admin/logout}">‚û°Ô∏è ƒêƒÉng xu·∫•t</a>
</div>


<div class="content">
    <h2 class="mb-4 text-center">Danh s√°ch l∆∞·ª£ng sinh vi√™n trong c√°c kh√≥a h·ªçc</h2>
    <!-- Statistics -->
    <div class="row mb-4 text-center">
        <div class="col-md-4">
            <div class="card shadow-sm p-3">
                <h5 class="text-primary">T·ªïng s·ªë kh√≥a h·ªçc</h5>
                <h3 th:text="${totalCourses}">0</h3>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow-sm p-3">
                <h5 class="text-success">T·ªïng s·ªë sinh vi√™n</h5>
                <h3 th:text="${totalStudents}">0</h3>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow-sm p-3">
                <h5 class="text-warning">T·ªïng l∆∞·ª£t ƒëƒÉng k√Ω</h5>
                <h3 th:text="${totalRegistrations}">0</h3>
            </div>
        </div>
    </div>


    <div class="row">
        <!-- B√™n tr√°i: B·∫£ng danh s√°ch kh√≥a h·ªçc -->
        <div class="col-md-8">
            <!-- Search Form -->
            <form class="d-flex mb-3" th:action="@{/admin/home}" method="get">
                <input class="form-control me-2" type="text" name="keyword" placeholder="T√¨m ki·∫øm theo t√™n kh√≥a h·ªçc"
                       th:value="${keyword}">
                <button class="btn btn-primary" type="submit">T√¨m ki·∫øm</button>
            </form>

            <!-- Course Table -->
            <div class="card shadow p-3">
                <table class="table table-striped align-middle text-center">
                    <thead class="table-primary">
                    <tr>
                        <th>ID</th>
                        <th>·∫¢nh</th>
                        <th>T√™n kh√≥a h·ªçc</th>
                        <th>Th·ªùi l∆∞·ª£ng</th>
                        <th>Gi·∫£ng vi√™n</th>
                        <th>S·ªë h·ªçc vi√™n</th>
                        <th>Ng√†y t·∫°o</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="course : ${coursePage.content}">
                        <td th:text="${course.id}"></td>
                        <td>
                            <img th:src="${course.image}" alt="Course Image" class="img-thumbnail"
                                 style="width: 60px; height: 60px;">
                        </td>
                        <td th:text="${course.name}"></td>
                        <td th:text="${course.duration + ' gi·ªù'}"></td>
                        <td th:text="${course.instructor}"></td>
                        <td th:text="${studentCount[course.id]}"></td>
                        <td th:text="${#temporals.format(course.createAt, 'dd/MM/yyyy')}"></td>
                    </tr>
                    </tbody>
                </table>

                <nav th:if="${coursePage.totalPages > 1}">
                    <ul class="pagination justify-content-center">
                        <li class="page-item" th:classappend="${coursePage.first} ? 'disabled'">
                            <a class="page-link"
                               th:href="@{/admin/home(page=${coursePage.number - 1}, size=${coursePage.size}, keyword=${keyword})}">Tr∆∞·ªõc</a>
                        </li>
                        <li class="page-item" th:each="i : ${#numbers.sequence(0, coursePage.totalPages - 1)}"
                            th:classappend="${i == coursePage.number} ? 'active'">
                            <a class="page-link"
                               th:href="@{/admin/home(page=${i}, size=${coursePage.size}, keyword=${keyword})}"
                               th:text="${i + 1}"></a>
                        </li>
                        <li class="page-item" th:classappend="${coursePage.last} ? 'disabled'">
                            <a class="page-link"
                               th:href="@{/admin/home(page=${coursePage.number + 1}, size=${coursePage.size}, keyword=${keyword})}">Sau</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        <!-- B√™n ph·∫£i: Top kh√≥a h·ªçc -->
        <div class="col-md-4">
            <div class="card shadow p-3">
                <h4 class="text-center mb-3">Top Kh√≥a H·ªçc ƒê√¥ng Sinh Vi√™n</h4>
                <div th:each="course : ${courses}" class="mb-3 border-bottom pb-2">
                    <h5 th:text="${course.name}"></h5>
                    <img th:src="@{${course.image}}" alt="·∫¢nh kh√≥a h·ªçc" class="img-fluid mb-2" style="max-height: 60px;">
                    <p>S·ªë l∆∞·ª£ng h·ªçc vi√™n: <span th:text="${course.studentCount}">0</span></p>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>
